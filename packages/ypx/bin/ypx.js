#!/usr/bin/env node

var _index = _interopRequireDefault(require("../index"));

var _util = require("util");

var _bluebird = _interopRequireDefault(require("bluebird"));

var _updateNotifier = _interopRequireDefault(require("@yarn-tool/update-notifier"));

var _argv = _interopRequireDefault(require("../lib/argv"));

var _err = require("../lib/err");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

let inputArgv = process.argv.slice(2);
(0, _updateNotifier.default)([__dirname, '..']);
let argv = (0, _argv.default)(inputArgv);

if (argv.debugBin) {
  console.log(__filename);
  process.exit();
}

let {
  p = []
} = argv;

if (!p || !p.length) {
  if (argv._.length !== 1) {
    throw new Error(`current not support this syntax, ${(0, _util.inspect)(argv)}`);
  } else {
    p = [argv._.shift()];
  }
}

if (argv._.length && argv['--'].length) {
  throw new Error(`current not support this syntax, ${inputArgv}`);
}

_bluebird.default.resolve(() => (0, _index.default)({ ...argv,
  package: p
}, inputArgv)).catch(_err.YpxError, e => {
  process.exit(e.exitCode);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInlweC50cyJdLCJuYW1lcyI6WyJpbnB1dEFyZ3YiLCJwcm9jZXNzIiwiYXJndiIsInNsaWNlIiwiX19kaXJuYW1lIiwiZGVidWdCaW4iLCJjb25zb2xlIiwibG9nIiwiX19maWxlbmFtZSIsImV4aXQiLCJwIiwibGVuZ3RoIiwiXyIsIkVycm9yIiwic2hpZnQiLCJCbHVlYmlyZCIsInJlc29sdmUiLCJwYWNrYWdlIiwiY2F0Y2giLCJZcHhFcnJvciIsImUiLCJleGl0Q29kZSJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFFQSxJQUFJQSxTQUFTLEdBQUdDLE9BQU8sQ0FBQ0MsSUFBUixDQUFhQyxLQUFiLENBQW1CLENBQW5CLENBQWhCO0FBRUEsNkJBQWUsQ0FBQ0MsU0FBRCxFQUFZLElBQVosQ0FBZjtBQUVBLElBQUlGLElBQUksR0FBRyxtQkFBVUYsU0FBVixDQUFYOztBQUVBLElBQUlFLElBQUksQ0FBQ0csUUFBVCxFQUNBO0FBQ0NDLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxVQUFaO0FBQ0FQLEVBQUFBLE9BQU8sQ0FBQ1EsSUFBUjtBQUNBOztBQUVELElBQUk7QUFBRUMsRUFBQUEsQ0FBQyxHQUFHO0FBQU4sSUFBYVIsSUFBakI7O0FBSUEsSUFBSSxDQUFDUSxDQUFELElBQU0sQ0FBQ0EsQ0FBQyxDQUFDQyxNQUFiLEVBQ0E7QUFDQyxNQUFJVCxJQUFJLENBQUNVLENBQUwsQ0FBT0QsTUFBUCxLQUFrQixDQUF0QixFQUNBO0FBQ0MsVUFBTSxJQUFJRSxLQUFKLENBQVcsb0NBQW1DLG1CQUFRWCxJQUFSLENBQWMsRUFBNUQsQ0FBTjtBQUNBLEdBSEQsTUFLQTtBQUNDUSxJQUFBQSxDQUFDLEdBQUcsQ0FBQ1IsSUFBSSxDQUFDVSxDQUFMLENBQU9FLEtBQVAsRUFBRCxDQUFKO0FBQ0E7QUFDRDs7QUFFRCxJQUFJWixJQUFJLENBQUNVLENBQUwsQ0FBT0QsTUFBUCxJQUFpQlQsSUFBSSxDQUFDLElBQUQsQ0FBSixDQUFXUyxNQUFoQyxFQUNBO0FBQ0MsUUFBTSxJQUFJRSxLQUFKLENBQVcsb0NBQW1DYixTQUFVLEVBQXhELENBQU47QUFDQTs7QUFFRGUsa0JBQVNDLE9BQVQsQ0FBaUIsTUFBTSxvQkFBSSxFQUN6QixHQUFHZCxJQURzQjtBQUV6QmUsRUFBQUEsT0FBTyxFQUFFUDtBQUZnQixDQUFKLEVBR25CVixTQUhtQixDQUF2QixFQUlFa0IsS0FKRixDQUlRQyxhQUpSLEVBSW1CQyxDQUFELElBQU87QUFDdkJuQixFQUFBQSxPQUFPLENBQUNRLElBQVIsQ0FBYVcsQ0FBQyxDQUFDQyxRQUFmO0FBQ0EsQ0FORiIsInNvdXJjZXNDb250ZW50IjpbIiMhL3Vzci9iaW4vZW52IG5vZGVcblxuaW1wb3J0IFlQWCBmcm9tICcuLi9pbmRleCc7XG5pbXBvcnQgeyBpbnNwZWN0IH0gZnJvbSAndXRpbCdcbmltcG9ydCBCbHVlYmlyZCBmcm9tICdibHVlYmlyZCc7XG5pbXBvcnQgdXBkYXRlTm90aWZpZXIgZnJvbSAnQHlhcm4tdG9vbC91cGRhdGUtbm90aWZpZXInO1xuaW1wb3J0IHBhcnNlQXJndiBmcm9tICcuLi9saWIvYXJndic7XG5pbXBvcnQgeyBZcHhFcnJvciB9IGZyb20gJy4uL2xpYi9lcnInO1xuXG5sZXQgaW5wdXRBcmd2ID0gcHJvY2Vzcy5hcmd2LnNsaWNlKDIpO1xuXG51cGRhdGVOb3RpZmllcihbX19kaXJuYW1lLCAnLi4nXSk7XG5cbmxldCBhcmd2ID0gcGFyc2VBcmd2KGlucHV0QXJndik7XG5cbmlmIChhcmd2LmRlYnVnQmluKVxue1xuXHRjb25zb2xlLmxvZyhfX2ZpbGVuYW1lKTtcblx0cHJvY2Vzcy5leGl0KCk7XG59XG5cbmxldCB7IHAgPSBbXSB9ID0gYXJndiBhcyB0eXBlb2YgYXJndiAmIHtcblx0cDogc3RyaW5nW10sXG59O1xuXG5pZiAoIXAgfHwgIXAubGVuZ3RoKVxue1xuXHRpZiAoYXJndi5fLmxlbmd0aCAhPT0gMSlcblx0e1xuXHRcdHRocm93IG5ldyBFcnJvcihgY3VycmVudCBub3Qgc3VwcG9ydCB0aGlzIHN5bnRheCwgJHtpbnNwZWN0KGFyZ3YpfWApXG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0cCA9IFthcmd2Ll8uc2hpZnQoKV07XG5cdH1cbn1cblxuaWYgKGFyZ3YuXy5sZW5ndGggJiYgYXJndlsnLS0nXS5sZW5ndGgpXG57XG5cdHRocm93IG5ldyBFcnJvcihgY3VycmVudCBub3Qgc3VwcG9ydCB0aGlzIHN5bnRheCwgJHtpbnB1dEFyZ3Z9YClcbn1cblxuQmx1ZWJpcmQucmVzb2x2ZSgoKSA9PiBZUFgoe1xuXHRcdC4uLmFyZ3YsXG5cdFx0cGFja2FnZTogcCxcblx0fSwgaW5wdXRBcmd2KSlcblx0LmNhdGNoKFlweEVycm9yLCAoZSkgPT4ge1xuXHRcdHByb2Nlc3MuZXhpdChlLmV4aXRDb2RlKTtcblx0fSlcbjtcbiJdfQ==